<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
			    xmlns:ui="http://java.sun.com/jsf/facelets"
			    xmlns:h="http://java.sun.com/jsf/html"
			    xmlns:f="http://java.sun.com/jsf/core"
			    xmlns:c="http://java.sun.com/jsp/jstl/core"  			      
			    template="./template/template_login.xhtml">
    
    <ui:define name="title">
        Reporte General de Ingresos
    </ui:define>
    
    <ui:define name="content">
            <h:outputScript library="js" name="analytics.js" target="head" />    
			<h:form id="reporteGeneralForm">			
				<f:event listener="#{generalReportBean.fillDropDowns}" type="preRenderView" />							
				<h:panelGrid  cellspacing="1" border="0" width="700 px;" 
							  bgcolor="#CCCCC0" columns="10" columnClasses="etiqueta,etiqueta_campo,etiqueta,etiqueta_campo,etiqueta,etiqueta_campo,etiqueta,etiqueta_campo,etiqueta,etiqueta_campo"							  
							  headerClass="titulocolumna" footerClass="columnadatoPar">
					
					<f:facet name="header">
						<h:outputText value="Reporte General de Ingresos" />  
					 </f:facet>													
					
					<h:outputText value="Mes Inicial:" />
					<h:selectOneMenu id="mesId" value="#{generalReportBean.initMonth}"  styleClass="campo_texto" >
						<f:ajax render="@none" execute="@this" />
                        <f:selectItem itemValue="1" itemLabel="Enero" />
                        <f:selectItem itemValue="2" itemLabel="Febrero" />
                        <f:selectItem itemValue="3" itemLabel="Marzo" />
                        <f:selectItem itemValue="4" itemLabel="Abril" />
                        <f:selectItem itemValue="5" itemLabel="Mayo" />
                        <f:selectItem itemValue="6" itemLabel="Junio" />
                        <f:selectItem itemValue="7" itemLabel="Julio" />
                        <f:selectItem itemValue="8" itemLabel="Agosto" />
                        <f:selectItem itemValue="9" itemLabel="Septiembre" />
                        <f:selectItem itemValue="10" itemLabel="Octubre" />
                        <f:selectItem itemValue="11" itemLabel="Noviembre" />
                        <f:selectItem itemValue="12" itemLabel="Diciembre" />
					</h:selectOneMenu>
					
					<h:outputText value="A&#241;o: Inicial" />
					<h:selectOneMenu id="anioId" value="#{generalReportBean.initYear}"  styleClass="campo_texto" >
						<f:ajax render="@none" execute="@this" />                        
                        <f:selectItem itemValue="2010" itemLabel="2010" />
                        <f:selectItem itemValue="2011" itemLabel="2011" />
                        <f:selectItem itemValue="2012" itemLabel="2012" />
                        <f:selectItem itemValue="2013" itemLabel="2013" />
                        <f:selectItem itemValue="2014" itemLabel="2014" />
                        <f:selectItem itemValue="2015" itemLabel="2015" />
                        <f:selectItem itemValue="2016" itemLabel="2016" />
                        <f:selectItem itemValue="2017" itemLabel="2017" />
                        <f:selectItem itemValue="2018" itemLabel="2018" />
                        <f:selectItem itemValue="2019" itemLabel="2019" />
                        <f:selectItem itemValue="2020" itemLabel="2020" />
					</h:selectOneMenu>
					
					<h:outputText value="Mes Fin:" />
					<h:selectOneMenu id="mesfinId" value="#{generalReportBean.endMonth}"  styleClass="campo_texto" >
						<f:ajax render="@none" execute="@this" />
                        <f:selectItem itemValue="1" itemLabel="Enero" />
                        <f:selectItem itemValue="2" itemLabel="Febrero" />
                        <f:selectItem itemValue="3" itemLabel="Marzo" />
                        <f:selectItem itemValue="4" itemLabel="Abril" />
                        <f:selectItem itemValue="5" itemLabel="Mayo" />
                        <f:selectItem itemValue="6" itemLabel="Junio" />
                        <f:selectItem itemValue="7" itemLabel="Julio" />
                        <f:selectItem itemValue="8" itemLabel="Agosto" />
                        <f:selectItem itemValue="9" itemLabel="Septiembre" />
                        <f:selectItem itemValue="10" itemLabel="Octubre" />
                        <f:selectItem itemValue="11" itemLabel="Noviembre" />
                        <f:selectItem itemValue="12" itemLabel="Diciembre" />
					</h:selectOneMenu>
					
					<h:outputText value="A&#241;o: Fin" />
					<h:selectOneMenu id="aniofinId" value="#{generalReportBean.endYear}"  styleClass="campo_texto" >
						<f:ajax render="@none" execute="@this" />                        
                        <f:selectItem itemValue="2010" itemLabel="2010" />
                        <f:selectItem itemValue="2011" itemLabel="2011" />
                        <f:selectItem itemValue="2012" itemLabel="2012" />
                        <f:selectItem itemValue="2013" itemLabel="2013" />
                        <f:selectItem itemValue="2014" itemLabel="2014" />
                        <f:selectItem itemValue="2015" itemLabel="2015" />
                        <f:selectItem itemValue="2016" itemLabel="2016" />
                        <f:selectItem itemValue="2017" itemLabel="2017" />
                        <f:selectItem itemValue="2018" itemLabel="2018" />
                        <f:selectItem itemValue="2019" itemLabel="2019" />
                        <f:selectItem itemValue="2020" itemLabel="2020" />
					</h:selectOneMenu>		
					
					<h:outputText value="Tipo de Ingreso" />
					<h:selectOneMenu id="tipoIngresoId" value="#{generalReportBean.receiptId}"  styleClass="campo_texto" >
							<f:ajax render="@none" execute="@this" />
	  						<f:selectItems value="#{receiptsBean.receiptsList}" />
					</h:selectOneMenu>
					
					<f:facet name="footer">
						<h:panelGroup style="text-align:right">		  
						  <h:commandButton id="buscarId" styleClass="boton" value="Buscar" action="#{generalReportBean.searchAction}" />
						</h:panelGroup>
					 </f:facet>
										
				</h:panelGrid>
				
				<br />
			 <h:panelGroup rendered="#{generalReportBean.showReport}">			 								
				
				<table align="center"  cellspacing="0" border="0" bgcolor="#CCCCC0">
					<tr valign="top">
						<td valign="top">
							<table>
								<tr>
				       				<td align="center" class="titulocolumna">Casa</td>
				       				<td align="center" class="titulocolumna">Nombre</td>
				       			</tr>	       			
				       			
				       			<ui:repeat var="row" value="#{generalReportBean.gReceiptsReportView.condominiumsViews}" varStatus="status">
				       				<tr>
				       					<td class="titulo_lista_interna">#{row.houseNumber}</td>
				       					<td class="titulo_lista_interna"> #{row.userView.nombre} #{row.userView.apaterno} #{row.userView.amaterno} </td>
				       				</tr>
				       			</ui:repeat>
				       			<tr>
				       				<td align="center" colspan="2" class="etiqueta_campo_right">Totales:</td>
				       			</tr>	
							</table>						
						</td>
						
						<td valign="top">
							<table border="0" bgcolor="#CCCCC0">
							 <tr valign="top">
								<c:forEach items="${generalReportBean.gReceiptsReportView.generalReportViews}" var="row" >                                                                               
                                        <td valign="top">
                                        <table border="0" bgcolor="#CCCCC0">
	                                        <tr valign="top">
	                                           <td align="center" class="titulocolumna">#{row.rangeDate}</td>
	                                        </tr> 
		                                   
		                                    <c:forEach items="${row.amount}" var="r">
	                                            <tr valign="top">
       											 <td class="etiqueta_campo_right"> <h:outputLabel value="#{r}" style="#{r &#60;= 0 ? 'color: red;' : ''}" /> </td>
												</tr>                                                                                                                                                                                                                                                    
	                                        </c:forEach>
	                                        <tr>
	                                        	<td class="etiqueta_campo_right"> <h:outputLabel value="#{row.totalAmount}" style="#{row.totalAmount eq '0.00' ? 'color: red;' : ''}" /> </td>
	                                        </tr>
                                        </table>
                                        </td>                                                                             
                                  </c:forEach>							
                               </tr>
							</table>
						</td>					
					</tr>																		       				       		
	       					        					        			       			
				</table>
				    						    					    					    			    									 							 
		     </h:panelGroup>
				
			</h:form>			
	</ui:define>
    
</ui:composition>